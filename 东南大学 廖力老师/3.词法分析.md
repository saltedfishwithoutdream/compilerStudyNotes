1.正规文法
– 是Chomsky 3型文法
• 注：正规文法是描述正规集的文法，可用于描述程序设计语言的语法部分。
例如：标识符这种单词可以用下面的规则描述。
– <标识符> → <字母>|<标识符>(<字母>|<数字>)
– <字母>表示任意英文字母，<数字>表示任意数字）

2.正规集
– 由正规文法产生的语言

3.正规式
– 设A是非空的有限字母表，A={ai| i=1,2,……n},则
 ε，Φ和ai (i=1,2,……n)都是正规式。
 若α、β是正规式，则α|β、 α•β 、α*、 β+也是正规式。
 正规式只能通过有限次使用1，2规则获得。
注：1)“|”读作为“或”，也可写作为“+”或“，”；“•”读作连接。
2)仅由字母表A={ai| i=1,2,……n}上的正规式α所组 成的语言称作正规集，记作L(α)
3)利用正规集相同，可用来证明相应正规式等价

4.三个概念间关系
– 一个正规语言可以用正规文法定义，也可以用正规式定义，对任意一个正规文法，存在一个定义
同一个语言的正规式；同样，对每个正规式，存在一个生成同一语言的正规文法；有些正规语言
很容易用文法定义，有些则用正规式定义更容易；两者之间是可以转换的，结构上具有等价性。
– 由正规文法或正规式定义的正规语言的集合构成正规集

5.定理
• 若α、β、γ是正规式则下述等价式成立
– 1. α+β= β + α
– 2. α+(β + γ)=( α+ β)+ γ α(βγ) =(α β)γ
– 3. α(β + γ )= α β + α γ (α+β) γ= α γ + βγ
– 4. εα = αε = α
– 5.(α*)*=α*
– 6. α*=α＋＋ε α＋ ＝ α α* = α*α
– 7. (α+ β)*= (α* + β *)*= (α* β*)*

若α、β、γ是字母表A上的正规式，且ε∉L(γ)，则
α= β|αγ当且仅当 α= βγ* 
α= β|γα当且仅当 α= γ*β

6.正规文法转换成相应正规式
– 1.由正规文法G的各个产生式写出对应的正规方程式，得到联立方程组。
– 2.把方程组中的非终结符当作变元。
– 3.求此正规式方程组的解，得到关于开始符号S的解：S=w , w ∈VT*，w就是所求正规式。
举例见PPT第3章12-13页

7.有限自动机（Finite Automation,FA）
   有限自动机是一种识别装置，它能准确地识别正规集。它为词法分析程序的构造提供了方法和工具。
   有限自动机是具有离散输入输出系统的数学模型。它具有有限数目的内部状态，系统可以根据当前所
处的状态和面临的输入字符决定系统的后继行为。其当前状态概括了过去输入处理的信息。

8.确定有限自动机DFA(Deterministic FA)
• (1)定义：确定有限自动机是一个五元式 M(S,Σ,f,s0,Z） 
– 其中：S：有限状态集
– Σ ：有限字母表
– f：S× Σ→S上的单值映射，f(s,a)=s’
– s0：唯一的初态，s0 ∈ S
– Z：终止状态集，Z⊆S 
• 注：这里确定的含义，就是状态转换关系f是一个函数，即对于给定的当前状态s和当前读入的符号a，有唯一确定的下一状态s’。

9.不确定有限自动机NFA(Non-deterministic FA)
(1)定义：不确定有限自动机是一个五元式
M=（S,Σ,f,S0,Z） 
– 其中：S：有限状态集
– Σ ：有限字母表
– f： S× Σ→2S(S的子集)上的映射
– S0：非空的初态集，S0 是S的真子集
– Z：终止状态集，Z是S的子集，可为空集
注：1)非确定主要是指后继状态可有多个。
2) DFA是NFA的特例

10.NFA确定化（子集法）
对于每个NFA M，存在一个DFA M’，使得L(M)=L(M’)。即，设L是一NFA接受的正规集，则存在一个DFA接受L。
算法见PPT 32-34页

11.确定有限自动机的化简（最小化）
(1)化简条件：接受的语言必须相同
(2)化简(最小化)算法基本思想——划分法
– a.将DFA M 中的状态划分为互不相交的子集，每个子集内部的状态都等价；而在不同子集间的状态均不等价。
– b.从每个子集中任选一个状态作为代表，消去其它等价状态。
– c.把那些原来射入其它等价状态的弧改为射入相应的代表状态
(3)状态等价：设DFA M中有两个状态s,t， 
• s,t 等价：
– (s,w) ┣ *(s1,ε)同时(t,w) ┣ *(t1, ε)，s1,t1都是终态，
w ∈VT* ，即如果从状态s出发能读出某个字w
而 停于 终态，从t出发也能读出同样的字w而停
于终态，则称s,t 等价。
• s,t可区别 ： 
– 如果s,t不等价，则称为s,t可区别
(4)化简(最小化)算法分为终态集和非终态集： ∏0＝{I01,I02}， I01属于非终态集,I02属于终态集。因为终态能识别ε，而非终态不能，所以它们是可区别的；
b.假定经过k次划分后： ∏k＝{Ik0,Ik1……Ikm}.这m个子集之间可区分，子集内部还是否可以划分？
– 任取一个子集Iki={s1,s2,……sk},若存在某读入字符a， 使f(Iki,a)的结果不是全部包含在∏k的某个子集中，则说明Iki中有不等价的状态，还要进一步划分。
– 对∏k中所有子集都进行测试，以完成一次划分。
c.重复步骤2，直到所含的子集数不再增加为止。
d.对每个子集任取一状态为代表。若该子集包含原有的初态，则相应代表状态就是最小化后M的初态；同
样，若该子集包含原有的终态，则相应代表状态就是最小化后M的终态。

注：1）当一个自动机没有任何多余的状态，并且它的状态中没有两个是互相等价的时，我们说这个有限自动机是化简了的。
2）可以通过消除多余状态，合并等价状态而转化成一个最小化的与之等价的有限自动机

举例见PPT 44页-47页

12.关系定理
定理： Σ上的NFA M所能识别的语言L(M)可以用Σ上的正规式来表示。即：对Σ上的NFA M ，可构造一个正规式α，使得L(α)=L(M)
定理： Σ上任何正规式α ，存在DFA M使得L(M)=L(α)。即：由 正规式α可以构造一个DFA M，使得L(M)＝L(α)

13.有限自动机M向正规式α的转换
1)把状态转换图的概念拓广，令每条弧上都可以用一个正规式作标记。
2)在M的转换图上加两个结点：x,y。从 x用ε弧连接到M的所有初态结点；从M的终态结点用ε 弧连接到y。这个新的NFA为M’，且L(M)=L(M’)
3)通过引入的3条有限自动机替换规则逐步消去M’中的所有结点，直到只剩下x和y为止。这样，在x至y的
弧线上的标记就是Σ上的正规式，也就是M接受的正规式。
注：在消除结点过程中，逐步用正规式来标记弧
替换规则见 FA替换规则.png
举例见 PPT 51-52页

14.正规式α向确定有限自动机M的转换
1)由正规式α 构造一个如下仅有两个结点x,y的状态图。
2)按所引入的3条正规式分裂规则分裂α 。
3)重复步骤2直到每个弧上的标记是Σ上的一个字符或ε为止。
4)将所得的NFA M(因为包含ε弧)进行确定化就得到DFA。

这里将NFA M进行确定化与前面所讲的子集法确定化是一回事。不过，这里的NFA M中含有ε弧，
所以在求覆盖片时应考虑ε弧。方法是求ε闭包(ε-closure)，将此闭包(状态子集)作为DFA的一个状态
使用，而将NFA上的状态间转换变为闭包间的转换，使得不确定的自动机确定化

分裂规则见  正规式分裂规则.png
举例见PPT 55页

15.ε闭包
是可以从某状态或某些状态通过ε弧所能到达的所有状态的集合。
状态集合I的ε闭包(ε-closure(I))形式定义如下：
(a)若s ∈ I，则s ∈ε-closure(I)
(b)若s ∈ I，那么从s出发经过任意段的ε弧所能达到的
任意状态s’都属于ε-closure(I)

16.对含有ε弧的NFA进行确定化方法
由NFA M=(S,Σ,f,S0,Z)构造一个等价的DFA M’=(Q,Σ,δ,I0,F）
(a) I0＝ε-closure(S0), I0∈Q
(b)若状态集Q中有状态Ii={s0,s1,……sj} , sk∈S , 0≤k ≤ j;且有It= ε-closure(f(Ii,a)),若It不在Q中，则将It加入Q。
(c)重复步骤2，直到Q中无新状态加入。
(d)取终态F={I | I ∈ Q,且I ∩ Z <>Φ}

17.关系定理
• 设G=(VN,VT,P,S)是正规文法，则存在一个有限自动机M=(Q,Σ,f,q0,Z)使得L(G)=L(M)。
• 注：1)正规文法分为右线性文法和左线性文法。但对一个正规文法，不能既是左线性，又是右线性。
2)对每个有限自动机 M，都存在一个右线性正规文法GR和左线性正规文法GL，使得L(M)=L(GR)=L(GL)

18.右线性文法转换为等价自动机（注意分析过程）
设有右线性文法：G=(VN,VT,P,S)，将其转换为自动机M=(Q, Σ,f,q0,Z)。转换步骤如下：
1)将VN中的每个非终结符视为状态符号，并增加一个新的终结状态符号T，即令Q=VN∪{T} ;
    同时，令Σ ＝ VT ， q0 ＝S;若P中含有S → ε ，则令Z={S,T}，否则令 Z={T}
2)P中的产生式用如下映射f来代替。
  a)对于P中每一条形如 A1 → aA2的产生式，在M中设为 f(A1,a)= A2.
  b)对于P中每一条形如 A1 → a的产生式，在M中设为 f(A1,a)= T.
  c)对Σ上的所有a，取 f(T,a)=Φ,即在终态下有限自动机无动作。

19.有限自动机向右线性文法的转换
设有限自动机M=(S ,Σ,f, s0,Z),右线性文法Rg=(VN,VT,P,s0),
1)若s0∉Z，则P是由以下规则定义的产生式集合：
a)若M中有映射f(Ai,a)=Aj,则P中有Ai→aAj;
b)若Aj∈Z,则P中增加产生式Ai→a，即Ai→a|aAj;
2)若s0∈Z,除了上述映射所构成产生式之外，还有映射
f(s0,ε)=s0,此时需要在P中增加产生式： s0’→ ε |s0，以
s0’代替s0作为开始符号。

20.左线性文法转换为有限自动机
设有左线性文法：G=(VN,VT,P,S)，有限自动机
M=(Q,Σ,f,q0,Z)，将G转换为M的转换步骤如下：
1)令Q=VN∪{q0}, q0是M中新增的初态； Σ=VT ；S对应于M中的Z；若P中含有S→ε，则令Z={S, q0 }，否则， 令Z={S} ；
2)P中的产生式用如下映射 f 来代替:
– a)对于P中每一条形如 A1 → A2a的产生式，在M中设映射式 f(A2,a)= A1.
– b)对于P中每一条形如 A1 → a的产生式，在M中设映射式f(q0,a)= A1